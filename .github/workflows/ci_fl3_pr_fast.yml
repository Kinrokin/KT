name: FL3 PR Fast
on:
  pull_request:

jobs:
  fl3-pr-fast:
    runs-on: ubuntu-latest
    timeout-minutes: 20
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"
      - name: Install pytest
        run: python -m pip install --upgrade pip pytest
      - name: Run FL3 tests (fast)
        env:
          PYTEST_DISABLE_PLUGIN_AUTOLOAD: "1"
          PYTHONPATH: KT_PROD_CLEANROOM/04_PROD_TEMPLE_V2/src:KT_PROD_CLEANROOM
        run: python -m pytest -q KT_PROD_CLEANROOM/tests/fl3
      - name: Run Temple V2 tests (smoke)
        env:
          PYTEST_DISABLE_PLUGIN_AUTOLOAD: "1"
          PYTHONPATH: KT_PROD_CLEANROOM/04_PROD_TEMPLE_V2/src:KT_PROD_CLEANROOM
        run: python -m pytest -q KT_PROD_CLEANROOM/04_PROD_TEMPLE_V2/tests

